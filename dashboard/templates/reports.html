{% extends 'base.html' %}
{% load static %}
{% block title %}Reports{% endblock %}
{% block content %}
<div class="container">
  <div class="card">
    <h1>Incident Reports</h1>
    <table>
      <thead>
        <tr>
          <th>Image</th>
          <th>Description</th>
          <th>Reported By</th>
          <th>Timestamp</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="incidentsBody">
        <tr><td colspan="5" style="text-align:center;color:#777;">Loadingâ€¦</td></tr>
      </tbody>
    </table>
    <!-- Image overlay viewer -->
    <div id="imgOverlay" class="overlay" aria-hidden="true">
      <img id="imgFull" class="modal-image" alt="Incident image" />
    </div>
  </div>
</div>

<div id="cfg" data-is-admin="{{ user.is_admin|yesno:'true,false' }}"></div>

<div id="cfg" data-is-admin="{{ user.is_admin|yesno:'true,false' }}" data-resolve-url="{% url 'resolve_incident' %}"></div>
<script type="module" src="{% static 'js/reports.js' %}"></script>
<style>
.overlay{ display:none; position:fixed; inset:0; background: rgba(0,0,0,0.6); z-index: 1300; align-items:center; justify-content:center; padding: 1rem; }
.modal-image{ max-width: 92vw; max-height: 92vh; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,.35); }
</style>
{% endblock %}